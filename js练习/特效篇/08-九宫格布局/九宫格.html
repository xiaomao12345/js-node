<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>九宫格布局</title>
		<style>
	        *{
	            margin: 0;
	            padding: 0;
	            list-style: none;
	        }
	
	        #top{
	            padding: 20px;
	        }
	
	        #bottom{
	            position: relative;
	        }
	
	        .box{
	            width: 220px;
	            height: 360px;
	            margin: 0 15px 15px 0;
	            background-color: #e8e8e8;
	        }
	
	        .box p:last-child{
	            font-size: 13px;
	            color: orangered;
	        }
	    </style>
	</head>
	<body>
		<div id="top">
	        <button id="btn1">3列</button>
	        <button id="btn2">4列</button>
	        <button id="btn3">5列</button>
	    </div>
	    <div id="bottom">
	        <div class="box">
	            <img src="image/1.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	        <div class="box">
	            <img src="image/2.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	        <div class="box">
	            <img src="image/3.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	        <div class="box">
	            <img src="image/4.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	        <div class="box">
	            <img src="image/5.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	        <div class="box">
	            <img src="image/6.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	        <div class="box">
	            <img src="image/7.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	        <div class="box">
	            <img src="image/8.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	        <div class="box">
	            <img src="image/9.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	        <div class="box">
	            <img src="image/10.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	        <div class="box">
	            <img src="image/11.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	        <div class="box">
	            <img src="image/12.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	        <div class="box">
	            <img src="image/13.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	        <div class="box">
	            <img src="image/14.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	        <div class="box">
	            <img src="image/15.jpg" alt="">
	            <p>因为遇见你</p>
	            <p>孙怡邓伦牵手演绎刺绣奇缘</p>
	        </div>
	    </div>
	    <script>
	    	window.onload = function() {
	    		$('btn1').addEventListener('click',function() {
	    			
	    			j_flex(3,$('bottom'));
	    		});
	    		
	    		$('btn2').addEventListener('click',function() {
	    			j_flex(4,$('bottom'));
	    		});
	    		
	    		$('btn3').addEventListener('click',function() {
	    			j_flex(5,$('bottom'));
	    		});
	    	}
	    	
	    	//九宫格布局调用函数
	    	function j_flex(allCols,parentNode) {
	    		//  1.定义变量
	    		var boxW = 220, boxH = 360, marginXY = 15;
	    		//console.log(parentNode.children);
	    		//  2.遍历
	    		for (var i = 0 ; i < parentNode.children.length; i++) {
	    			//  求出当前盒子所在的行和列
	    			var row = Math.floor(i / allCols);
	    			var col = Math.floor(i % allCols);
	    			//console.log('当前盒子所在的位置：(' + row +','+ col +')');
	    			
	    			
	    			//  盒子的定位
	    			var currentBox = parentNode.children[i];
	    			currentBox.style.position = 'absolute';
	                currentBox.style.left = col * (boxW + marginXY) + 'px';
	                currentBox.style.top = row * (boxH + marginXY) + 'px';
	    		}
	    	}
	    	
	    	
	    	function $(id) {
	    		return typeof id === 'string' ? document.getElementById(id) : null; 
	    	}
	    </script>
	</body>
</html>
